 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html lang="en">
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=utf-8"> 
        <title>jsBridge++ test</title> 
        <script type = "text/javascript">
        function WebSocketTest() {

            if ("WebSocket" in window) {
                console.log("WebSocket is supported.");

                // Open a web socket
                var ws = new WebSocket("ws://localhost:9002/");

                ws.onopen = function() {
                    console.log("Connected to server.")
                    // Send identification
                    ws.send("user");
                    console.log("Sent 'user'");
                    // Send some data
                    ws.send("Hi from user!");
                    console.log("Sent 'Hi from user!'")
                };
                
                ws.onmessage = function (event) { 
                    var received_msg = event.data;
                    console.log("Message is received: ", received_msg);
                };

               ws.onclose = function() { 

                  // websocket is closed.
                  console.log("Connection is closed..."); 
               };
            } else {
                // The browser doesn't support WebSocket
                alert("WebSocket is not supported in your browser.");
            }
        }
        </script>        
    </head> 
    <body> 
        <p>WebSockets Testpage for jsBridge++</p> 
        <div>
            <a href = "javascript:WebSocketTest()">Run test</a>
        </div>        
    </body> 
</html> 